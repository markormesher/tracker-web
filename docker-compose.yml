version: '3.3'

services:
  tracker-web-app:
    build: ./app
    container_name: tracker-web-app
    ports:
     - "3004:3000"
    depends_on:
      - tracker-web-postgres
    command: ["./wait-for-it/wait-for-it.sh", "tracker-web-postgres:5432", "--strict", "--", "pm2-runtime", "./process.local.json"]

  tracker-web-postgres:
    image: postgres:9.4
    container_name: tracker-web-postgres
    volumes:
      - ./tracker-web-postgres-data:/var/lib/postgresql/data

volumes:
  tracker-web-postgres-data:
